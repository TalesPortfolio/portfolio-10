{"ast":null,"code":"var _jsxFileName = \"/home/tales/Documents/GITHUB-PORTFOLIO/portfolio-10/notas/frontend-tasks/src/pages/Auth/LoginRegister.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport * as S from \"./styles\";\n\n// Interfaces para tipagem da resposta da API\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst LoginRegister = () => {\n  _s();\n  const [aba, setAba] = useState(\"login\");\n  const [form, setForm] = useState({\n    email: \"\",\n    password: \"\",\n    name: \"\",\n    surname: \"\",\n    city: \"\",\n    timezone: \"UTC\"\n  });\n  const [loading, setLoading] = useState(false); // Estado de carregamento\n  const navigate = useNavigate();\n  const aoMudar = e => {\n    setForm({\n      ...form,\n      [e.target.name]: e.target.value\n    });\n  };\n  const aoEnviar = async e => {\n    e.preventDefault();\n    setLoading(true);\n    try {\n      if (aba === \"cadastro\") {\n        // Cadastrar usuário\n        await api.post('/Users', {\n          email: form.email,\n          password: form.password,\n          name: form.name,\n          surname: form.surname,\n          city: form.city,\n          timezone: form.timezone || \"UTC\"\n        });\n        alert(\"Usuário cadastrado!\");\n        setAba(\"login\");\n      } else {\n        var _res$data;\n        // Fazer login\n        const res = await axios.post(\"http://localhost:4000/login\", {\n          email: form.email,\n          password: form.password\n        });\n\n        // Salvar usuário no localStorage\n        if (!((_res$data = res.data) !== null && _res$data !== void 0 && _res$data.user)) {\n          throw new Error(\"Login falhou: usuário não encontrado.\");\n        }\n        localStorage.setItem(\"user\", JSON.stringify(res.data.user));\n        navigate(\"/tarefas\");\n      }\n    } catch (error) {\n      var _error$response, _error$response$data;\n      // Tratamento de erro\n      const mensagemErro = ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.error) || error.message || \"Erro ao processar solicitação\";\n      alert(mensagemErro);\n    } finally {\n      setLoading(false); // Finaliza carregamento\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(S.Container, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(S.Tab, {\n        ativa: aba === \"login\",\n        onClick: () => setAba(\"login\"),\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(S.Tab, {\n        ativa: aba === \"cadastro\",\n        onClick: () => setAba(\"cadastro\"),\n        children: \"Cadastro\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(S.Formulario, {\n      onSubmit: aoEnviar,\n      children: [aba === \"cadastro\" && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(S.Campo, {\n          name: \"name\",\n          placeholder: \"Nome\",\n          value: form.name,\n          onChange: aoMudar,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(S.Campo, {\n          name: \"surname\",\n          placeholder: \"Sobrenome\",\n          value: form.surname,\n          onChange: aoMudar,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(S.Campo, {\n          name: \"city\",\n          placeholder: \"Cidade\",\n          value: form.city,\n          onChange: aoMudar,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true), /*#__PURE__*/_jsxDEV(S.Campo, {\n        type: \"email\",\n        name: \"email\",\n        placeholder: \"Email\",\n        value: form.email,\n        onChange: aoMudar,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(S.Campo, {\n        type: \"password\",\n        name: \"password\",\n        placeholder: \"Senha\",\n        value: form.password,\n        onChange: aoMudar,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(S.Botao, {\n        type: \"submit\",\n        disabled: loading,\n        children: loading ? \"Carregando...\" : aba === \"login\" ? \"Entrar\" : \"Cadastrar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 5\n  }, this);\n};\n_s(LoginRegister, \"tcyepdjQ8u3wsJHXSUQ+MoekNXM=\", false, function () {\n  return [useNavigate];\n});\n_c = LoginRegister;\nexport default LoginRegister;\nvar _c;\n$RefreshReg$(_c, \"LoginRegister\");","map":{"version":3,"names":["React","useState","useNavigate","axios","S","jsxDEV","_jsxDEV","Fragment","_Fragment","LoginRegister","_s","aba","setAba","form","setForm","email","password","name","surname","city","timezone","loading","setLoading","navigate","aoMudar","e","target","value","aoEnviar","preventDefault","api","post","alert","_res$data","res","data","user","Error","localStorage","setItem","JSON","stringify","error","_error$response","_error$response$data","mensagemErro","response","message","Container","children","Tab","ativa","onClick","fileName","_jsxFileName","lineNumber","columnNumber","Formulario","onSubmit","Campo","placeholder","onChange","required","type","Botao","disabled","_c","$RefreshReg$"],"sources":["/home/tales/Documents/GITHUB-PORTFOLIO/portfolio-10/notas/frontend-tasks/src/pages/Auth/LoginRegister.tsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport * as S from \"./styles\";\n\n// Interfaces para tipagem da resposta da API\ninterface User {\n  id: number;\n  email: string;\n  name: string;\n  surname: string;\n  city: string;\n  timezone: string;\n}\n\ninterface AuthResponse {\n  user: User;\n}\n\nconst LoginRegister = () => {\n  const [aba, setAba] = useState<\"login\" | \"cadastro\">(\"login\");\n  const [form, setForm] = useState({\n    email: \"\",\n    password: \"\",\n    name: \"\",\n    surname: \"\",\n    city: \"\",\n    timezone: \"UTC\",\n  });\n\n  const [loading, setLoading] = useState(false); // Estado de carregamento\n  const navigate = useNavigate();\n\n  const aoMudar = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setForm({ ...form, [e.target.name]: e.target.value });\n  };\n\n  const aoEnviar = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n\n    try {\n      if (aba === \"cadastro\") {\n        // Cadastrar usuário\n        await api.post('/Users', {\n  email: form.email,\n  password: form.password,\n  name: form.name,\n  surname: form.surname,\n  city: form.city,\n  timezone: form.timezone || \"UTC\",\n});\n\n        alert(\"Usuário cadastrado!\");\n        setAba(\"login\");\n\n      } else {\n        // Fazer login\n        const res = await axios.post<AuthResponse>(\"http://localhost:4000/login\", {\n          email: form.email,\n          password: form.password,\n        });\n\n        // Salvar usuário no localStorage\n        if (!res.data?.user) {\n          throw new Error(\"Login falhou: usuário não encontrado.\");\n        }\n\n        localStorage.setItem(\"user\", JSON.stringify(res.data.user));\n        navigate(\"/tarefas\");\n      }\n    } catch (error: any) {\n      // Tratamento de erro\n      const mensagemErro =\n        error.response?.data?.error ||\n        error.message ||\n        \"Erro ao processar solicitação\";\n\n      alert(mensagemErro);\n    } finally {\n      setLoading(false); // Finaliza carregamento\n    }\n  };\n\n  return (\n    <S.Container>\n      <div>\n        <S.Tab ativa={aba === \"login\"} onClick={() => setAba(\"login\")}>\n          Login\n        </S.Tab>\n        <S.Tab ativa={aba === \"cadastro\"} onClick={() => setAba(\"cadastro\")}>\n          Cadastro\n        </S.Tab>\n      </div>\n\n      <S.Formulario onSubmit={aoEnviar}>\n        {aba === \"cadastro\" && (\n          <>\n            <S.Campo\n              name=\"name\"\n              placeholder=\"Nome\"\n              value={form.name}\n              onChange={aoMudar}\n              required\n            />\n            <S.Campo\n              name=\"surname\"\n              placeholder=\"Sobrenome\"\n              value={form.surname}\n              onChange={aoMudar}\n              required\n            />\n            <S.Campo\n              name=\"city\"\n              placeholder=\"Cidade\"\n              value={form.city}\n              onChange={aoMudar}\n              required\n            />\n          </>\n        )}\n\n        <S.Campo\n          type=\"email\"\n          name=\"email\"\n          placeholder=\"Email\"\n          value={form.email}\n          onChange={aoMudar}\n          required\n        />\n        <S.Campo\n          type=\"password\"\n          name=\"password\"\n          placeholder=\"Senha\"\n          value={form.password}\n          onChange={aoMudar}\n          required\n        />\n\n        <S.Botao type=\"submit\" disabled={loading}>\n          {loading ? \"Carregando...\" : aba === \"login\" ? \"Entrar\" : \"Cadastrar\"}\n        </S.Botao>\n      </S.Formulario>\n    </S.Container>\n  );\n};\n\nexport default LoginRegister;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}