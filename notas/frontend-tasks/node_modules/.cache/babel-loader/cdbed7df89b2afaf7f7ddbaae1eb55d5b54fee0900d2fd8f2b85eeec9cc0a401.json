{"ast":null,"code":"var _jsxFileName = \"/home/tales/Documents/GITHUB-PORTFOLIO/portfolio-10/notas/frontend-tasks/src/pages/Auth/LoginRegister.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport * as S from \"./styles\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst LoginRegister = () => {\n  _s();\n  const [aba, setAba] = useState(\"login\");\n  const [form, setForm] = useState({\n    email: \"\",\n    password: \"\",\n    name: \"\",\n    surname: \"\",\n    city: \"\",\n    timezone: \"UTC\"\n  });\n  const [loading, setLoading] = useState(false); // <-- ADICIONADO\n\n  const navigate = useNavigate();\n  const aoMudar = e => {\n    setForm({\n      ...form,\n      [e.target.name]: e.target.value\n    });\n  };\n  const aoEnviar = async e => {\n    e.preventDefault();\n    setLoading(true);\n    try {\n      if (aba === \"cadastro\") {\n        await axios.post(\"http://localhost:4000/Users\", {\n          email: form.email,\n          password: form.password,\n          name: form.name,\n          surname: form.surname,\n          city: form.city,\n          timezone: form.timezone || \"UTC\"\n        });\n        alert(\"Usuário cadastrado!\");\n        setAba(\"login\");\n      } else {\n        const res = await axios.post(\"http://localhost:4000/login\", {\n          email: form.email,\n          password: form.password\n        });\n\n        // Garanta que seu backend retorna um objeto com `user`\n        localStorage.setItem(\"user\", JSON.stringify(res.data.user));\n        navigate(\"/tarefas\");\n      }\n    } catch (error) {\n      var _error$response, _error$response$data;\n      alert(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.error) || \"Erro ao processar solicitação\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(S.Container, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(S.Tab, {\n        ativa: aba === \"login\",\n        onClick: () => setAba(\"login\"),\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(S.Tab, {\n        ativa: aba === \"cadastro\",\n        onClick: () => setAba(\"cadastro\"),\n        children: \"Cadastro\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(S.Formulario, {\n      onSubmit: aoEnviar,\n      children: [aba === \"cadastro\" && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(S.Campo, {\n          name: \"name\",\n          placeholder: \"Nome\",\n          value: form.name,\n          onChange: aoMudar,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(S.Campo, {\n          name: \"surname\",\n          placeholder: \"Sobrenome\",\n          value: form.surname,\n          onChange: aoMudar,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(S.Campo, {\n          name: \"city\",\n          placeholder: \"Cidade\",\n          value: form.city,\n          onChange: aoMudar,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true), /*#__PURE__*/_jsxDEV(S.Campo, {\n        type: \"email\",\n        name: \"email\",\n        placeholder: \"Email\",\n        value: form.email,\n        onChange: aoMudar,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(S.Campo, {\n        type: \"password\",\n        name: \"password\",\n        placeholder: \"Senha\",\n        value: form.password,\n        onChange: aoMudar,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(S.Botao, {\n        type: \"submit\",\n        disabled: loading,\n        children: loading ? \"Carregando...\" : aba === \"login\" ? \"Entrar\" : \"Cadastrar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 5\n  }, this);\n};\n_s(LoginRegister, \"tcyepdjQ8u3wsJHXSUQ+MoekNXM=\", false, function () {\n  return [useNavigate];\n});\n_c = LoginRegister;\nexport default LoginRegister;\nvar _c;\n$RefreshReg$(_c, \"LoginRegister\");","map":{"version":3,"names":["React","useState","useNavigate","axios","S","jsxDEV","_jsxDEV","Fragment","_Fragment","LoginRegister","_s","aba","setAba","form","setForm","email","password","name","surname","city","timezone","loading","setLoading","navigate","aoMudar","e","target","value","aoEnviar","preventDefault","post","alert","res","localStorage","setItem","JSON","stringify","data","user","error","_error$response","_error$response$data","response","Container","children","Tab","ativa","onClick","fileName","_jsxFileName","lineNumber","columnNumber","Formulario","onSubmit","Campo","placeholder","onChange","required","type","Botao","disabled","_c","$RefreshReg$"],"sources":["/home/tales/Documents/GITHUB-PORTFOLIO/portfolio-10/notas/frontend-tasks/src/pages/Auth/LoginRegister.tsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport * as S from \"./styles\";\n\nconst LoginRegister = () => {\n  const [aba, setAba] = useState<\"login\" | \"cadastro\">(\"login\");\n  const [form, setForm] = useState({\n    email: \"\",\n    password: \"\",\n    name: \"\",\n    surname: \"\",\n    city: \"\",\n    timezone: \"UTC\",\n  });\n\n  const [loading, setLoading] = useState(false); // <-- ADICIONADO\n\n  const navigate = useNavigate();\n\n  const aoMudar = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setForm({ ...form, [e.target.name]: e.target.value });\n  };\n\n  const aoEnviar = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    try {\n      if (aba === \"cadastro\") {\n        await axios.post(\"http://localhost:4000/Users\", {\n          email: form.email,\n          password: form.password,\n          name: form.name,\n          surname: form.surname,\n          city: form.city,\n          timezone: form.timezone || \"UTC\",\n        });\n        alert(\"Usuário cadastrado!\");\n        setAba(\"login\");\n      } else {\n        const res = await axios.post(\"http://localhost:4000/login\", {\n          email: form.email,\n          password: form.password,\n        });\n\n        // Garanta que seu backend retorna um objeto com `user`\n        localStorage.setItem(\"user\", JSON.stringify(res.data.user));\n        navigate(\"/tarefas\");\n      }\n    } catch (error: any) {\n      alert(error.response?.data?.error || \"Erro ao processar solicitação\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <S.Container>\n      <div>\n        <S.Tab ativa={aba === \"login\"} onClick={() => setAba(\"login\")}>\n          Login\n        </S.Tab>\n        <S.Tab ativa={aba === \"cadastro\"} onClick={() => setAba(\"cadastro\")}>\n          Cadastro\n        </S.Tab>\n      </div>\n\n      <S.Formulario onSubmit={aoEnviar}>\n        {aba === \"cadastro\" && (\n          <>\n            <S.Campo\n              name=\"name\"\n              placeholder=\"Nome\"\n              value={form.name}\n              onChange={aoMudar}\n              required\n            />\n            <S.Campo\n              name=\"surname\"\n              placeholder=\"Sobrenome\"\n              value={form.surname}\n              onChange={aoMudar}\n              required\n            />\n            <S.Campo\n              name=\"city\"\n              placeholder=\"Cidade\"\n              value={form.city}\n              onChange={aoMudar}\n              required\n            />\n          </>\n        )}\n\n        <S.Campo\n          type=\"email\"\n          name=\"email\"\n          placeholder=\"Email\"\n          value={form.email}\n          onChange={aoMudar}\n          required\n        />\n        <S.Campo\n          type=\"password\"\n          name=\"password\"\n          placeholder=\"Senha\"\n          value={form.password}\n          onChange={aoMudar}\n          required\n        />\n\n        <S.Botao type=\"submit\" disabled={loading}>\n          {loading ? \"Carregando...\" : aba === \"login\" ? \"Entrar\" : \"Cadastrar\"}\n        </S.Botao>\n      </S.Formulario>\n    </S.Container>\n  );\n};\n\nexport default LoginRegister;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}